pipeline{
  agent any
  
   stages {
      stage('Clone') {
            steps {
        git branch: 'master',url:"https://github.com/visakhchikku/simple-java-maven-app.git"
        }
        }
        stage ('Artifactory configuration') {
         steps {
          rtServer (
            id: "ARTIFACTORY_SERVER",
            url: 'http://34.210.245.228:8081/artifactory',
            credentialsId: 'artifactory_credential'
            )
            rtMavenDeployer (
              id: 'MAVEN_DEPLOYER',
              serverId: "ARTIFACTORY_SERVER",
              releaseRepo: "libs-release-local",
              snapshotRepo: 'libs-snapshot-local'
              )
              rtMavenResolver (
               id: 'MAVEN_RESOLVER',
               serverId: 'ARTIFACTORY_SERVER',
               releaseRepo: 'libs-release',
               snapshotRepo: 'libs-snapshot'
               )
               }
               }
               stage ('Exe Maven') {
                 steps {
                    rtMavenRun (
                        tool: maven,
                        pom: 'pom.xml',
                        goals: 'clean install',
                        deployerId: 'MAVEN_DEPLOYER',
                        resolverId: 'MAVEN_RESOLVER'
                        )
                        }
                        }
                        
                        stage('Publish build info') {
                          steps {
                             rtPublishBuildInfo (
                               serverId: "ARTIFACTORY_SERVER"
                               )
                               }
                               }
     }
}
